<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Registration</title>

  <style>
    input#name:invalid:focus {
      border: 1px solid red;
    }

    input#email:invalid:focus {
      border: 1px solid red;
    }

    input#password:invalid:focus {
      border: 1px solid red;
    }
  </style>
</head>

<body>
  <div>
    <h2>
      Registration Form
    </h2>
    <div>
      <div>
        <form id="user_form">
          <label for="name">Name</label>
          <input required placeholder="Enter Full Name" type="text" name="name" id="name" />

          <label for="email">Email</label>
          <input required placeholder="Enter Email" type="email" id="email" name="email" />

          <label for="password">Password</label>
          <input required placeholder="Enter Password" type="password" name="password" id="password" />

          <label for="dob">Date of Birth</label>
          <input required type="date" name="dob" id="dob" />

          <label for="acceptTerms">Accept Terms & Conditions</label>
          <input type="checkbox" name="acceptTerms" id="acceptTerms" />

          <button type="submit" id="submit">
            Submit
          </button>
        </form>
      </div>
    </div>
  </div>
  </div>
  
  <div>
    <div class="mx-auto">
      <h2 >Entries</h2>
      <div id="user-entries"></div>
    </div>
  </div>
  </div>

  <script>
    let curDate = new Date();
    curDateText = curDate.toISOString().split("T")[0];
    curArr = curDateText.split("-");
    curArr = curArr.map((element) => parseInt(element));
    minDate = [curArr[0] - 54, curArr[1], curArr[2]];
    maxDate = [curArr[0] - 19, curArr[1], curArr[2]];
    minDate = minDate.map((e) => e.toString());
    maxDate = maxDate.map((e) => e.toString());
    minDateText = minDate.join("-");
    maxDateText = maxDate.join("-");
    const email = document.getElementById("email");
    email.addEventListener("input", () => validate(email));
    const submit = document.getElementById("submit");
    submit.addEventListener("click", () => validate(email));
    const dateText = document.getElementById("dob");
    dateText.min = new Date(minDateText).toLocaleDateString("en-ca");
    dateText.max = new Date(maxDateText).toLocaleDateString("en-ca");

    function validate(element) {
      if (element.validity.typeMismatch) {
        element.setCustomValidity("The Email is not in the right format");
      } else {
        element.setCustomValidity("");
      }
    }
  </script>
  <script src="./index.js"></script>
</body>
</html>
